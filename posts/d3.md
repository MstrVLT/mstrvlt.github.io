---
title: d3
date: 2025-03-11
author: vlt
noreadmore: true
---

If you need to use D3 and your code is turning into a mess, try organizing it with composable functions.

```js
export function useD3(refName, cb = () => {}) {
  const refSelector = useTemplateRef(refName)
  watchPostEffect(() => cb(select(toValue(refSelector))))
}
```

[example](https://play.vuejs.org/#eNqdVm1v2zYQ/isH7YPl1rZsy3NWzynabhm2YfOCJigwTPtAS5TNhCIFklLiBf7vO5Ky7ChJ0VafSN5zL3zueKeH4H1ZjuqKBotgqVPFSgOamqp8mwhWlFIZeIBUFmVlaDYARfMBSPGnrITbG/mJ8IoOoNL0mhYlJ4Z+tJg7YtLtAJj+tJIZyvWWcC7vnEzQe3PN0tsGdZHnNDWwh1zJAnoYS+/ENxr+OW6FoyiLUZqIVAptIIuv6g2cd7yHvSwe6nrT6x+RKTOMaoTiDcJ/EgHuewBBCrqA3h9SZFL0BlDKskIzTIoF/DA/m43HY9gPnuBX9A7+luq2qzEbz1/QuNplgu46+Nn0TfwC/pIopjvw6XT2UkAfKLthYtNRmEy+n6ACaniFfx0jjtKwtybKOgg15cg/4vtw/hYeLLI98mojv3/PedhTuLDEuvOMGBJ6ake1LYSD4EYy0cESY1TY21K22Rp0O3nzWHDHMrPF87wSzjOEWd8HYz9OsSxTwukvJDVSYR7HI3ux2Y8HhMKiVQKy0fH+8OpUp0HuH7u1GTlxiRV74rWxydDQdNzq48IaaXnkZE35NzBp8Bl8KZOPsF8bObyGSdy9vrUYPk92S6WtrafXTsQy8p0CewRuTPPycAewxHcHLpfnSXA2HycB+JTjdjLDrUMhbgP1sFQUUk60RqGtRgTj8zxujCJC51IVeOTW1k14Nh5APO6jqWW0ecmcT0prsN0+b3I+75rEK9bNal0ZgxS9Szn2LFRrsoR1FloNQ7WZLCOPQo1ldEIIbrXZcbtcy2znOc6lMMOcFIzvFpAEv1JeU8NSAita0SQYQHuCfRNDHGqqWO4S4VQ1+w+f/GRa3ruzVHKpFvBdHNsk40tPxMgSiFfHtuo9Ms4XoA2lfI219RS22MqaqlOwRHI2R6QnEGzVeJRdDYlIt9Y3FZlHIm3NdYNB4Hv4sCDl6EZLgRPGaSaNANOxOBRdEmSx3SbB1phSL6IozQRqZZSzWo0ENZEoC2z+786i11QXSWD10OEe/RiNPT5nm44XO7UYp+qv0pb4Y29uGP3uzozC+XU4T7c0vX3m/Ebf+/AuFcVs1DZNB5khakONF19crZCXE2Ehs4oj+jPCj1RLXrke4WAfKpFh2Cc4F+1vjjTs8df64t5QoQ+XsoE6Nhw+CXCA/vSZqx/DjUezExazGPlD9qIIxyou2xn8CojGo2YCu/nbTmc3wC+lNn6IP/0PaH4QOtM9wV8AZ6FtQL6X4mNdYc8ZQLrGFh/6NrpvWpMf5Ai5cj3UTYHO4G/0XY/rhBZ6a+k6xNv5Lhw2wVm1g80+fpaP/f+k5/CW)

---